{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["export const createGalleryItemMarcup = images => {\n  return images\n    .map(\n      image =>\n        `<div class=\"card\">\n        <a href='${image.largeImageURL}'><img\n        src='${image.webformatURL}'\n        alt= '${image.tags}'\n        width=\"360\"\n        height=\"152\"\n      /></a>\n      <div>\n      <ul class=\"card-list\">\n        <li>\n          Likes\n          <span>${image.likes}</span>\n        </li>\n        <li>\n          Views\n          <span>${image.views}</span>\n        </li>\n        <li>\n          Comments\n          <span>${image.comments}</span>\n        </li>\n        <li>\n          Downloads\n          <span>${image.downloads}</span>\n        </li>\n      </ul>\n      </div>\n    </div>`\n    )\n    .join(' ');\n};\n","import axios from 'axios';\n\nconst API_KEY = '43847470-26a4b647964be33653231b3f4';\nconst BASE_URL = 'https://pixabay.com/api/';\nexport const PER_PAGE = 15;\n\nexport async function getPictures(q, picPage = 1) {\n  const response = await axios.get(BASE_URL, {\n    params: {\n      key: API_KEY,\n      q,\n      image_type: 'all',\n      orientation: 'horizontal',\n      safesearch: true,\n      page: picPage,\n      per_page: PER_PAGE,\n    },\n  });\n  const imagesData = response.data;\n  return imagesData;\n}\n","// import { findPhotoByRequst } from './js/pixabay-api.js';\nimport { createGalleryItemMarcup } from './js/render-functions.js';\nimport { getPictures, PER_PAGE } from './js/pixabay-api.js';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst searchFormEl = document.querySelector('.search-form');\nconst galleryEl = document.querySelector('.js-gallery');\nconst loaderEl = document.querySelector('.js-loader');\nconst loadMoreBtnEl = document.querySelector('.load-more-js');\n\nsearchFormEl.reset();\n\nlet searchReqest = '';\nlet picPage = 1;\nlet totalPages = 0;\n\nconst lightbox = new SimpleLightbox('.js-gallery a', {\n  captionsData: 'alt',\n  captionDelay: '250',\n});\n\nconst onSearchFormSubmit = async event => {\n  event.preventDefault();\n  searchReqest = event.target.elements.searchQuery.value.trim();\n  galleryEl.innerHTML = '';\n  loadMoreBtnEl.classList.add('is-hidden');\n\n  if (!searchReqest) {\n    return iziToast.info({\n      message: 'The search field must not be empty',\n      position: 'topCenter',\n      timeout: 2500,\n    });\n  }\n\n  picPage = 1;\n\n  try {\n    loaderEl.classList.remove('is-hidden');\n\n    const { hits, totalHits } = await getPictures(searchReqest, picPage);\n    if (totalHits === 0) {\n      iziToast.error({\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight',\n      });\n      searchFormEl.reset();\n      loaderEl.classList.add('is-hidden');\n      return;\n    }\n    galleryEl.insertAdjacentHTML('beforeend', createGalleryItemMarcup(hits));\n    lightbox.refresh();\n    loaderEl.classList.add('is-hidden');\n    totalPages = Math.ceil(totalHits / PER_PAGE);\n    if (totalPages > 1) {\n      loadMoreBtnEl.classList.remove('is-hidden');\n    }\n  } catch (error) {\n    loaderEl.classList.add('is-hidden');\n    searchFormEl.reset();\n  }\n  searchFormEl.reset();\n};\n\nsearchFormEl.addEventListener('submit', onSearchFormSubmit);\n\nconst smoothScrollOnLoadMore = () => {\n  const lastPhoto = document.querySelector('.card:last-child');\n  const photosHeight = lastPhoto.getBoundingClientRect().height;\n  const twoPhotosHeight = photosHeight * 2;\n  window.scrollBy({\n    top: twoPhotosHeight,\n    left: 0,\n    behavior: 'smooth',\n  });\n};\n\nconst onLoadPress = async event => {\n  try {\n    loaderEl.classList.remove('is-hidden');\n    picPage += 1;\n    const { hits, totalHits } = await getPictures(searchReqest, picPage);\n    galleryEl.insertAdjacentHTML('beforeend', createGalleryItemMarcup(hits));\n    lightbox.refresh();\n    smoothScrollOnLoadMore();\n    loaderEl.classList.add('is-hidden');\n    totalPages = Math.ceil(totalHits / PER_PAGE);\n    if (picPage < totalPages) {\n      loadMoreBtnEl.classList.remove('is-hidden');\n    } else {\n      iziToast.info({\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'topRight',\n      });\n       loadMoreBtnEl.removeEventListener('click', onLoadPress);\n      return;\n    }\n  } catch (error) {\n    loaderEl.classList.add('is-hidden');\n    searchFormEl.reset();\n    return;\n  }\n};\n\nloadMoreBtnEl.addEventListener('click', onLoadPress);\n"],"names":["createGalleryItemMarcup","images","image","API_KEY","BASE_URL","PER_PAGE","getPictures","q","picPage","axios","searchFormEl","galleryEl","loaderEl","loadMoreBtnEl","searchReqest","totalPages","lightbox","SimpleLightbox","onSearchFormSubmit","event","iziToast","hits","totalHits","smoothScrollOnLoadMore","twoPhotosHeight","onLoadPress"],"mappings":"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"}